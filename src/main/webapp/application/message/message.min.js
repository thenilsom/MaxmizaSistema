var message=angular.module("message",[]);message.run(["$message",function(n){n.addContainer()}]),message.constant("MessageSettings",{container:"body",showDelay:300,slideDown:500,hideDelay:6e3,slideUp:700}),message.constant("ConfirmSettings",{width:"400px",actionOk:null,labelOk:"Ok",actionYes:null,labelYes:"Sim",actionNo:null,labelNo:"Não",labelConfirm:"Confirmação",msg:""}),message.constant("Resource",{}),message.provider("$messageConfig",["Resource","MessageSettings","ConfirmSettings",function(n,e,s){this.setResource=function(e){angular.copy(e,n)},this.setMessageSettings=function(n){angular.extend(e,n)},this.setConfirmSettings=function(n){angular.extend(s,n)},this.$get=function(){return this}}]),message.service("$message",["$filter","MessageSettings",function(n,e){var s=[];this.addContainer=function(){$(e.container).append('<div class="message" ng-messages ></div>')},this.addMsgSuccess=function(n){t(n,"alert-success")},this.addMsgInf=function(n){t(n,"alert-info")},this.addMsgWarning=function(n){t(n,"alert-warning")},this.addMsgDanger=function(n){t(n,"alert-danger")};var a=function(n,a){s.push(n);var t="msg_"+Math.floor(7e3*Math.random()),i='<div id="'+t+'" class="message-content alert alert-dismissible '+a+' "><a class="close" style="right:0" onclick="$('+"'.alert'"+').hide()">x</a>'+n+"</div>";$("div[ng-messages]").append(i),$("#"+t).delay(e.showDelay).slideDown(e.slideDown),$("#"+t).delay(e.hideDelay).slideUp(e.slideUp,function(){s.splice(s.indexOf($(this).text()),1),$(this).remove()})},t=function(e,t){if(e){var i=void 0;angular.isString(e)?(i=n("i18n")(e),i=void 0!=i?i:e):(i=n("i18n")(e.msg,e.params,e.htmlBinding),i=i=void 0!=i?i:e.msg),-1==s.indexOf(i)&&a(i,t)}};return this}]),message.factory("$confirm",["$rootScope","$filter","ConfirmSettings",function(n,e,s){var a=this;a.msgCurrents={};var t=function(n){var t={};angular.extend(t,s,n),this.addConfirm=function(n){var s={};angular.extend(s,t,n);var o="confirm_"+Math.floor(7e3*Math.random()),r=void 0;if(angular.isString(s.msg)?(r=e("i18n")(s.msg),r=angular.isDefined(r)?r:s.msg):(r=e("i18n")(s.msg.msg,s.msg.params,s.msg.htmlBinding),r=angular.isDefined(r)?r:msg.msg),angular.isDefined(a.msgCurrents[r])){var l=$("#"+a.msgCurrents[r]);angular.isDefined(l)?l.modal({backdrop:"static",keyboard:!1}):(a.msgCurrents[r]=o,i(o,s,r))}else a.msgCurrents[r]=o,i(o,s,r)};var i=function(n,e,s){var a=r(n,e,s);$("body").append(a);var t=$("#"+n);o(t,e),t.modal({backdrop:"static",keyboard:!1})},o=function(n,e){e.actionOk?n.find(".btn-ok").click(l(n,e.actionOk)):(n.find(".btn-yes").click(l(n,e.actionYes)),n.find(".btn-no").click(l(n,e.actionNo)))},r=function(n,e,s){var a=$(window).width()<e.width.substring(0,e.width.length-2)?"94%":e.width,t='<div id="'+n+'" class="modal fade" ><div class="confirm-dialog modal-dialog" style="width:'+a+'" >';return t+='<div class="modal-content"><div class="modal-header"><h5 class="modal-title">'+e.labelConfirm+'</h5></div><div class="modal-body">',t+='<div class="row" ><div class="col-lg-12 text-center" ><span class="msg-confirm" >'+s+"</span></div></div>",t+='<div class="row row-mg-2" ><div class="col-lg-12  text-center" >',e.actionOk?t+='<a class="btn btn-default btn-ok" role="button"  ><span>'+e.labelOk+"</span></a>":(t+='<a class="btn btn-default btn-yes" role="button" style="margin-right: 10px;"  ><span>'+e.labelYes+"</span></a>",t+='<a class="btn btn-default btn-no" role="button" style="margin-left: 10px;" ><span>'+e.labelNo+"</span></a>"),t+="</div></div></div></div></div></div>"},l=function(n,e){return function(){e&&e(),$(n).modal("hide").remove(),$("body").removeAttr("style"),$("body").removeClass(),a.msgCurrents[n.find(".msg-confirm").text()]=void 0}}};return n.$on("$locationChangeStart",function(n){angular.forEach(a.msgCurrents,function(n){$("#"+n).modal("hide").remove()}),a.msgCurrents={},$("body").removeAttr("style"),$("body").removeClass()}),t}]),message.filter("i18n",["$sce","Resource",function(n,e){return function(s,a,t){var i=e[s];if(a)if(angular.isArray(a)&&a.length>0)for(var o=0;o<a.length;o++)i=i.replace(new RegExp("\\{"+o+"\\}","g"),a[o]);else a.toString().trim().length>0&&(i=i.replace(new RegExp("\\{0}","g"),a));return t?n.trustAsHtml(i):i}}]);