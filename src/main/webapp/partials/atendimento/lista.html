<div class="row">
	<div  class="panel panel-default panel-tabela">
		<div class="tabela" >
			<table class="table table-striped table-bordered table-condensed table-fixedheader">
				<thead>
					<tr>	
					
						<th class="col-sm-1"  data-order data-ng-click="order('id')">#
							<div data-ng-show="fieldName == 'id'" data-ng-class="{reverse:reverse}"></div>
						</th>
						<th class="col-sm-1">Data</th>
						
						<th class="col-sm-2">Tempo</th>
							
						<th class="col-sm-3">Cliente - Contato</th>
						
						<th class="col-sm-2">Assuntos</th>
						
						<th class="col-sm-1">Atendente</th>
			
						<th class="col-sm-2">Ações</th>
					</tr>
				</thead>
				<tbody>
				    <tr data-ng-class="atendimento.status | lowercase" data-heigth data-ng-repeat="atendimento in listaTabela | orderBy:fieldName:reverse | filter:filtroAtendimento | filter:search as filtros">
						
						<td class="col-sm-1 linha-tabela">{{atendimento.id}}</td>
						
						<td class="col-sm-1 linha-tabela">{{atendimento.dataInicio  | date: "dd/MM/yyyy" : "UTC"}}</td>
						
						<td class="col-sm-2 linha-tabela">{{atendimento.tempo}}</td>
						
						<td class="col-sm-3 linha-tabela">{{atendimento.cliente.nomeFantasia}} - {{atendimento.contato}}</td>
						
						<td class="col-sm-2 linha-tabela">
							<ul class="list-inline">
							    <li data-ng-repeat="assunto in atendimento.assuntos">{{assunto.descricao}}{{$last ? '' : ','}}</li>
							</ul>
						</td>
						
						<td class="col-sm-1 linha-tabela">
							<ul class="list-inline">
							    <li data-ng-repeat="usuario in atendimento.usuarios">{{usuario.nome}}{{$last ? '' : ','}}</li>
							</ul>
						</td>
						
						<td class="col-sm-2 linha-tabela" data-title="'Ações'" >
							
							<a class="btn btn-default btn-xs" data-ng-click="visualizar(atendimento)" >
					        	<span class="glyphicon glyphicon-search"></span>
					        </a>	
							<a data-ng-disabled="$security.hasRoles(['TECNICO']) && atendimento.status == 'FINALIZADO'"
							class="btn btn-info btn-xs" data-ng-click="alterar(atendimento)" >
					        	<span class="glyphicon glyphicon-pencil"></span>
					        </a>
					        
							<button data-ng-if="$security.hasRoles(['ADMIN'])" class="btn btn-danger btn-xs" data-ng-click="excluir(atendimento)">
								<span class="glyphicon glyphicon-trash"></span>
							</button>
							 <a data-popover 
								data-problema="{{atendimento.problema}}" data-posicao="left"
								data-solucao="{{atendimento.solucao}}" 
								data-dataInicio='{{atendimento.dataInicio  | date: "dd/MM/yyyy HH:mm:ss" : "UTC"}}' data-dataFim='{{atendimento.dataFim  | date: "dd/MM/yyyy HH:mm:ss" : "UTC"}}' data-usuario="{{atendimento.usuarioSolucao.nome}}">
						    </a>
														
						</td>	
					</tr>
				</tbody>
			</table>
		</div>
		<div class="panel-footer panel-footer-tabela">
			<div class="row">
				<div class="col-sm-4">
					<div class="input-group">
						<span class="input-group-addon"> <span
							class="glyphicon glyphicon-search"></span>
						</span> <input id="inputFiltro" type="text" data-focus class="form-control"
							placeholder="Pesquisa" data-ng-model="search.$">
					</div>
	            </div>
				<div class="col-sm-6">
									
					<div class="form-group">
						<div data-ng-if="$security.hasRoles(['ADMIN' , 'SECRETARIA'])">
							<label class="col-md-2 control-label registros-tabela">Usúario:</label>
							<div class="col-md-4">
								<select name="usuario" data-ng-model="filtro.usuario" id="usuario" class="form-control"
										data-ng-options="usuario.nome for usuario in usuarios">
										<option value="">Todos</option>
								</select>
							</div>
						</div>
						
						<label class="col-md-2 control-label registros-tabela">Status:</label>
						<div class="col-md-4">
							<select id="txtStatus" name="status" 
							        data-ng-model="filtro.status" class="form-control "
							        data-ng-options="key as val for (key, val) in status">
							        <option value="">Todos</option>
							</select>
						</div>
					</div>
				</div>
	             <div class="col-offset-md-3 text-right registros-tabela">
	              <span>Total de Registros: {{filtros.length}}</span>
	            </div>		
			</div>
			
		</div>
	</div>
	
	<div class="panel panel-default text-center panel-botoes-tabela">
		<a class="btn btn-primary" data-ng-click="incluir()"><span
			class="glyphicon glyphicon-plus"></span> Novo </a> 
			
			<a  class="btn btn-info" data-toggle="modal" data-ng-click="prepararFiltros()" data-target="#modalFiltro">
				<span class="glyphicon glyphicon-filter"></span>Filtros</a>
			
	</div>
	
		 
	<!-- Modal -->
  <div class="modal fade" id="modalFiltro" role="dialog">
    <div class="modal-dialog">	
		 <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-body">
        <div data-ng-include="'partials/atendimento/filtro.html'"></div>
        </div>
      </div>
      </div>
      </div>

</div>